from yahoofinancials import YahooFinancials
import ssl
ssl._create_default_https_context = ssl._create_unverified_context

tickers = []
with open("name.csv")as f:
    f_csv = csv.reader(f)
    for row in f_csv:
        tickers.append(row[0])
a = ['BRK.B', 'PARA', 'CEG', 'BF.B', 'V', 'XOM', 'CVX', 'WMT', 'MRK', 'T', 'UPS', 'BMY', 'NEE', 'CVS', 'ORCL', 'COP', 'BA', 'GE', 'DUK', 'F', 'SO', 'EOG', 'HUM', 'PXD', 'MRNA', 'NXPI', 'MPC', 'DOW', 'SRE', 'HLT', 'DD', 'DLR', 'PSX', 'CTVA', 'VLO', 'OXY', 'DVN', 'AMP', 'WBA', 'PEG', 'EXPE', 'HAL', 'TWTR', 'DAL', 'LUV', 'HES', 'BKR', 'ALB', 'EIX', 'FANG', 'ABC', 'RCL', 'CTRA', 'CCL', 'WDC', 'MRO', 'MGM', 'CZR', 'MOS', 'CF', 'UDR', 'CAH', 'LVS', 'UAL', 'LYV', 'KIM', 'AES', 'HST', 'INCY', 'RE', 'APA', 'AAL', 'NI', 'WYNN', 'AIZ', 'CDAY', 'DXC', 'PBCT', 'FRT', 'NCLH', 'ALK', 'RL']
for i in a:
    tickers.remove(i)

def EPS(ticker):
    EPS={}
    for i in ticker:
        yahoo_financials = YahooFinancials(i)
        t= yahoo_financials.get_earnings_per_share()
        EPS[i]= t
    return EPS


EPS = {'AAPL': 6.0149997341405435,
 'MSFT': 9.388999791966,
 'AMZN': 64.80999901662003,
 'GOOGL': 112.19699565169371,
 'GOOG': 112.1970017014442,
 'TSLA': 4.901000168639461,
 'NVDA': 3.849999996560504,
 'BRK.B': None,
 'FB': 13.770000674449012,
 'JPM': 15.359999272752741,
 'UNH': 18.080000125877902,
 'JNJ': 7.810000259170707,
 'PG': 5.652999765267848,
 'V': 6.036000107778729,
 'HD': 15.529999432572236,
 'BAC': 3.570000104437252,
 'MA': 8.76000029100574,
 'DIS': 1.682999969655927,
 'PFE': 3.854000241748681,
 'ABBV': 6.44999982200532,
 'KO': 2.250000027398929,
 'AVGO': 15.00000013269874,
 'CSCO': 2.799999876561357,
 'PEP': 5.489999861012662,
 'COST': 11.630000206177366,
 'WFC': 4.191999970162596,
 'VZ': 5.319999832660555,
 'ADBE': 10.020000335983246,
 'CMCSA': 3.108999896802973,
 'ABT': 4.0300001113620505,
 'TMO': 21.544001150361137,
 'ACN': 9.612999712678256,
 'WMT': 2.8399998149426264,
 'CRM': 1.818000012976173,
 'INTC': 5.157999994455005,
 'MRK': 2.8340002301877822,
 'LLY': 6.550000199267767,
 'MCD': 9.700000313168418,
 'QCOM': 7.870000179682593,
 'AMD': 3.242000063563996,
 'NKE': 3.8099998755338786,
 'PM': 5.739999534837501,
 'NFLX': 11.091000259663298,
 'DHR': 7.881999566473501,
 'T': 0.1289999872700991,
 'UNP': 9.334999667505935,
 'LOW': 11.467000346478383,
 'UPS': 7.355000153768709,
 'LIN': 6.7960004058595995,
 'TXN': 7.78800014180517,
 'NEE': 0.6140000327715724,
 'RTX': 2.200000143104953,
 'INTU': 7.581000227754674,
 'MS': 7.831999549251891,
 'MDT': 3.4679998668406533,
 'CVS': 5.729000138181869,
 'SCHW': 2.6270000165798546,
 'C': 10.557999103856007,
 'HON': 7.770000010854382,
 'AMGN': 9.700999821914225,
 'PYPL': 4.158999818353453,
 'AMAT': 6.4,
 'AXP': 9.573000116932967,
 'GS': 60.62999862299054,
 'NOW': 1.090999959370804,
 'IBM': 5.28299992339715,
 'ANTM': 22.228001948095784,
 'SBUX': None,
 'BLK': 37.60699979273511,
 'DE': 18.990000036571164,
 'BKNG': 9.249999260323644,
 'PLD': 2.6440002438881725,
 'CAT': 9.347999214181154,
 'MU': 6.461000009768091,
 'AMT': 5.506999906542011,
 'ISRG': 4.637999913278628,
 'TGT': 13.58700026723247,
 'LMT': 21.70900135914313,
 'MDLZ': 3.1410001507471557,
 'SPGI': 11.599000703389597,
 'ZTS': 4.149000256401385,
 'CB': 19.66999988573606,
 'ADI': 3.459999900504828,
 'MMM': 10.110999700409636,
 'CME': 6.780000162333168,
 'PNC': 10.173000302056472,
 'ADP': 6.320000468792128,
 'SYK': 4.968000062055927,
 'TFC': 4.2380002177744664,
 'LRCX': 29.587998615928203,
 'TJX': 2.1669999743773922,
 'CSX': 1.5889999338709608,
 'USB': 4.982999746495936,
 'GILD': 5.843999783957758,
 'MMC': 5.289999862361843,
 'BDX': 6.849999643043271,
 'DUK': 3.9100002570103576,
 'CI': 24.026999391879624,
 'CHTR': 21.94300164957073,
 'TMUS': 2.6599999031851156,
 'GM': 7.472000177600971,
 'CCI': 2.8710001625338304,
 'EL': 8.248000094577144,
 'ICE': 5.420999872725494,
 'SO': 2.801000212036251,
 'CL': 3.1400002491556656,
 'EW': 2.3249999900669325,
 'NSC': 11.61900048746118,
 'REGN': 62.52600201978967,
 'COF': 26.73900108802171,
 'SHW': 7.298999783787531,
 'D': 3.170999971818779,
 'FCX': 2.6409999126715995,
 'ATVI': 3.371000043855161,
 'ITW': 8.598999480692772,
 'EQIX': 4.743000076830227,
 'PGR': 6.880000157828335,
 'ETN': 5.152999851080341,
 'HCA': 19.533001465661812,
 'NOC': 28.350002397502017,
 'FIS': 0.36,
 'VRTX': 8.338000394328251,
 'FISV': 1.9299999843682505,
 'KLAC': 17.617999160457085,
 'EMR': 3.8199997302343163,
 'WM': 4.119999588586101,
 'FDX': 18.18100115844221,
 'HUM': 20.50900051981315,
 'NEM': 2.536999866254571,
 'APD': 9.436000059188613,
 'PSA': 8.37099987229755,
 'MCO': 11.161998758385588,
 'AIG': 6.376999858864578,
 'MET': 5.991999513948019,
 'ILMN': 6.109000156949065,
 'GD': 11.652000063359468,
 'ADSK': 5.92799984458215,
 'MAR': 1.4280000051009107,
 'CNC': 1.2489999172451192,
 'TEL': 6.787999915579467,
 'SPG': 6.176999722456579,
 'JCI': 2.272000011390255,
 'DG': 10.230999831710538,
 'ROP': 10.536999028205702,
 'ORLY': 28.779000508842795,
 'CTSH': 3.545000059048436,
 'APH': 2.3800001163024356,
 'SNPS': 4.809999867254582,
 'ECL': 3.911000224861044,
 'KMB': 5.881999703358906,
 'MSCI': 8.239999780007857,
 'BK': 3.9249999098758224,
 'LHX': 7.513999944762772,
 'IQV': 3.928999727182151,
 'PRU': 18.35899917776054,
 'SYY': 1.3320000766030726,
 'INFO': 1.5499999853108415,
 'ADM': 4.629999987692716,
 'AEP': 4.76200013907921,
 'CMG': 24.90699901331756,
 'TRV': 14.280999438295238,
 'MCK': None,
 'FTNT': 3.3219997768441893,
 'HPQ': 5.32999982531674,
 'IDXX': 8.718000472558677,
 'BAX': 2.3760001044176393,
 'GIS': 3.6279999859442706,
 'EXC': 1.7100000233732,
 'GPN': 3.166999823884259,
 'AZO': 102.56899818474345,
 'MCHP': 1.1429999609461463,
 'A': 3.940000176361913,
 'PH': 14.344999514361998,
 'AFL': 6.166999832182307,
 'APTV': 2.9409999002377516,
 'CARR': 2.4929998112053067,
 'CDNS': 2.4799998957864893,
 'O': 1.2679999639324455,
 'DXCM': 5.301999905459809,
 'PAYX': 3.5199998017076073,
 'EA': 2.7149999505078135,
 'ALGN': 9.277999910345603,
 'MSI': 7.245000089847212,
 'YUM': 5.178000308150426,
 'DFS': 16.724001388864078,
 'SIVB': 32.59499680610465,
 'WMB': 0.8199999401062461,
 'STZ': 3.8719999335228925,
 'TT': 5.561999606250602,
 'WELL': 1.0349999387112163,
 'XEL': 2.9239999147973537,
 'PPG': 5.951000424920307,
 'EBAY': 18.280999966344744,
 'ALL': 10.829999837479724,
 'NUE': 16.576999869328617,
 'IFF': 1.1670000827634812,
 'TDG': 10.393999749066916,
 'STT': 6.787000082162926,
 'RMD': 3.4119999524839173,
 'CBRE': 4.289999882979701,
 'FITB': 3.6180002299504914,
 'AVB': 7.235000138909039,
 'ROST': 4.465000423064116,
 'MTD': 31.902998063822036,
 'KMI': 0.7679999824143117,
 'TROW': 13.270000721495135,
 'OTIS': 2.7990000198616953,
 'PCAR': 5.019999705223505,
 'SBAC': 2.6059998372088655,
 'CTAS': 10.701999842665222,
 'GLW': 1.0040000279512808,
 'MTCH': 1.8839999904123972,
 'AJG': 4.622000331535888,
 'CMI': 15.211000813352161,
 'BIIB': 10.217000330141833,
 'FRC': 7.262999926324546,
 'ROK': 11.579999539861603,
 'KR': 1.325000124971941,
 'VRSK': 4.28000041253016,
 'MNST': 2.85999982136256,
 'DLTR': 5.9419997996647345,
 'KEYS': 4.7799999937658955,
 'BLL': 2.4280000386023497,
 'AME': 3.990000088261603,
 'FAST': 1.5399999627569538,
 'HSY': 6.887999603116298,
 'WY': 3.311000069452845,
 'ANET': 2.4630001292465415,
 'EQR': 2.8229997371201607,
 'ED': 3.375999729920022,
 'WST': 8.062999704288263,
 'ES': 3.4420000533790724,
 'WEC': 4.150000387565126,
 'OKE': 3.1950000299629817,
 'WTW': None,
 'TSN': 8.340000014505925,
 'ODFL': 8.086999255485335,
 'CERN': 1.7000000912702722,
 'ANSS': 5.317999734574947,
 'DHI': 11.410000065700576,
 'AWK': 4.197999791716496,
 'KHC': 1.8580000524502758,
 'CPRT': 4.149999931297225,
 'SWK': 11.048998898791867,
 'ARE': 6.514000015079516,
 'LYB': 17.121000926474636,
 'EFX': 5.653999870818488,
 'LH': 28.186997970279975,
 'EXR': 5.383999535835247,
 'EPAM': 7.210999575267763,
 'CDW': 7.116000058914253,
 'ZBH': 3.914000050577387,
 'VMC': 4.84999958361384,
 'NTRS': 6.340000078106302,
 'LEN': 14.269999977814162,
 'RSG': 3.7900000084977576,
 'MKC': 2.8200000204326674,
 'TSCO': 7.821000505740905,
 'HIG': 6.00899938775906,
 'KEY': 2.5670000541078246,
 'MLM': 11.649999442034565,
 'SYF': 7.06899981044545,
 'IT': 8.02499991199693,
 'CHD': 3.2780001462335266,
 'MAA': 3.726999760575999,
 'MTB': 13.94599987905908,
 'HBAN': 0.8920000191226148,
 'DTE': 4.514999667516441,
 'DOV': 6.4889993637086025,
 'RF': 2.669000009344919,
 'URI': 16.533999556256628,
 'FTV': 4.583999986224553,
 'ZBRA': 15.683999366810916,
 'CFG': 4.980000280455175,
 'SWKS': 8.970000131140353,
 'HPE': 2.579999785776191,
 'PKI': 10.023000233101097,
 'FE': 2.0120001948014323,
 'STX': 6.794999663264111,
 'STE': 2.75000016809292,
 'BBY': 10.34300064884445,
 'AEE': 3.8369997081021716,
 'IR': 0.9869999578247326,
 'PPL': None,
 'ETR': 6.179000342281459,
 'VTR': 0.5289999941233678,
 'SBNY': 13.954001294718507,
 'GWW': 17.495000725695004,
 'ESS': 6.869999442150529,
 'NTAP': 4.112999941159009,
 'VRSN': 5.424999989975485,
 'ULTA': 15.603000124667563,
 'RJF': 6.630000099232929,
 'ENPH': 1.1519999592212404,
 'NDAQ': 6.871999960775789,
 'DRE': 2.4360001521624923,
 'MPWR': 4.459999979323613,
 'TDY': 9.938999731266769,
 'FLT': 9.685999269096342,
 'WAT': 11.159999567492678,
 'COO': 59.15999863144349,
 'VFC': 3.119999882016811,
 'GNRC': 8.233000444537668,
 'TER': 5.309000288396016,
 'CINF': 15.529999210943116,
 'TTWO': 4.83599979285668,
 'DRI': 6.994999870462966,
 'GPC': 5.609000378338497,
 'PFG': 6.219999856929273,
 'AMCR': 0.606999978026914,
 'WAB': 2.408999852714545,
 'CMS': 3.0169999995134655,
 'OMC': 6.419999632478282,
 'IP': 4.541000117274776,
 'EXPD': 6.7579996825466155,
 'CLX': 3.4670000413342352,
 'VTRS': None,
 'POOL': 14.753000354424303,
 'PARA': None,
 'HOLX': 7.209999711070987,
 'TYL': 3.824999832760331,
 'KMX': 7.25899958616107,
 'BXP': 2.0439998591297397,
 'CAG': 2.4809999415500297,
 'PEAK': 1.1449999708929735,
 'TRMB': 2.1970000487429666,
 'GRMN': 5.85799982200303,
 'CE': 24.79199915467338,
 'CNP': 1.5729999341465861,
 'ETSY': 3.3670000587223767,
 'AKAM': 3.6410001806875796,
 'NVR': 308.4080022796456,
 'CTLT': 3.176999910312743,
 'EMN': 3.7260000426973376,
 'BR': 4.6550003439460115,
 'K': 3.6679998276089743,
 'NLOK': 1.4959998913229922,
 'XYL': 2.5490000806195376,
 'DPZ': 13.175000036862082,
 'JBHT': 6.30000037047046,
 'DGX': 16.632999949208084,
 'PAYC': 2.949999803264645,
 'TXT': 3.400000148774802,
 'J': 3.1960000689733317,
 'TECH': 4.3370002628552005,
 'FDS': 10.530000023518781,
 'BRO': 2.048999904297062,
 'FMC': 4.568999784636735,
 'AVY': 8.90699909687693,
 'SJM': 7.008000126133764,
 'TFX': 9.143999914899954,
 'QRVO': 9.656000798298646,
 'CEG': None,
 'CRL': 7.7209999763662305,
 'PWR': 3.8089998857145067,
 'IEX': 5.627999888095409,
 'MAS': 1.8219999949719679,
 'MKTX': 7.309999536502934,
 'IPG': 1.7710000449801353,
 'LNT': 2.5340000222789136,
 'AAP': 9.819000104476556,
 'PKG': 7.850999848557747,
 'EVRG': 3.835999916143258,
 'ATO': 5.120000093276404,
 'ABMD': 3.2570001468944265,
 'SEDG': 2.666000025518445,
 'FOXA': 2.9579999386307065,
 'BBWI': 5.741000337363634,
 'RHI': 4.677999840390019,
 'HWM': 0.6610000009188701,
 'HRL': 1.6599999283102758,
 'CMA': 8.03100060767475,
 'LKQ': 3.4359999129858894,
 'LDOS': 5.419999996428336,
 'HAS': 3.2779999774446282,
 'WHR': 31.35099927778225,
 'IRM': 2.1970000650674026,
 'JKHY': 4.301999934146525,
 'BIO': 220.47601357551721,
 'CBOE': 4.184000002630068,
 'CTXS': 2.517999800935721,
 'WRB': 5.565000450930087,
 'L': 6.150999836586903,
 'NDSN': 7.739999461291846,
 'PHM': 6.465000250776308,
 'WRK': 3.1299999089227035,
 'FBHS': 5.418000229690782,
 'LNC': 6.971999758246448,
 'XRAY': 1.902000048116277,
 'FFIV': 5.340000329324719,
 'BF.B': None,
 'CHRW': 5.646000301787941,
 'HSIC': 4.393000014784891,
 'SNA': 14.652999031234348,
 'PTC': 4.030000086243666,
 'ZION': 7.078000253228125,
 'JNPR': 0.45000000949081065,
 'TPR': 2.921999913444333,
 'BWA': 3.2079996942884716,
 'ALLE': 5.08599986621165,
 'UHS': 12.422999209445505,
 'REG': 1.9400000773263866,
 'SEE': 3.036999920745342,
 'NWL': 1.40999999480344,
 'GL': 7.385000243948957,
 'LW': 1.7500000000000002,
 'PNR': 3.020999798039766,
 'AOS': 2.8900001821947385,
 'NRG': 9.975999651219123,
 'OGN': 5.975000094674297,
 'TAP': None,
 'CPB': 3.1210002795415743,
 'LUMN': None,
 'NWSA': 0.8299999339728644,
 'DISCK': 1.4950000465359317,
 'BEN': 3.5699998511987663,
 'MHK': 49.89534235372301,
 'PENN': 2.358999824023807,
 'DVA': 8.562999813469041,
 'PNW': 5.043000184400462,
 'IVZ': 2.5300000682166526,
 'DISH': 4.15900003459045,
 'HII': 16.667999406893536,
 'VNO': None,
 'PVH': 6.998999927381066,
 'ROL': 0.7070000515963085,
 'NLSN': 2.1830000676848305,
 'FOX': 2.9580000347721085,
 'IPGP': 4.869000176608207,
 'DISCA': 1.4950000964516192,
 'UAA': 0.945000040098165,
 'UA': 0.9449999778249103,
 'NWS': 0.8299999546783922}

for i in list(EPS.keys()):
    if EPS[i] is None:
        EPS.pop(i)
a = sorted(EPS.items(), key=lambda x: x[1], reverse=True)

select = a[:29]
EPS = []
for i in select:
    EPS.append(i[0])